<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: control-plusminus.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: control-plusminus.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
  * Construct a new Plus/Minus control.
  *
  * @class
  * @param {Home} home the home that this control belongs to.
  * @param {String} id the id of this control. Updates will be POSTed to
  *                    &lt;code>home.control_endpoint/id&lt;/code>
  * @param {Object} options options for this control:
  * &lt;ul>
  *   &lt;li>
  *     &lt;code>name&lt;/code> - String, required - friendly name for this control
  *   &lt;/li>
  *   &lt;li>
  *     &lt;code>min_value&lt;/code> - float, required - minimum value.
  *   &lt;/li>
  *   &lt;li>
  *     &lt;code>max_value&lt;/code> - float, required - maximum value.
  *   &lt;/li>
  *   &lt;li>
  *     &lt;code>step&lt;/code> - float, required - amount to add / subtract when
  *     clicking the + / - buttons.
  *   &lt;/li>
  *   &lt;li>
  *     &lt;code>current&lt;/code> - float, required - initial value.
  *   &lt;/li>
  * &lt;/ul>
  */
function PlusMinusControl(home, id, options) {
  "use strict";
  this.home = home;
  this.id = id;
  this.options = options;
  var template_source = $("#control-plusminus-template").html();
  this.template = Handlebars.compile(template_source);
}

PlusMinusControl.prototype.render = function() {
  "use strict";
  this.html = $(this.template(this.options));
  var thiz = this;
  this.input = this.html.find("input")
      .val(this.options.current)
      .on("change", function() {
        var jq = $(this);
        var val = parseFloat(jq.val());
        if (isNaN(val)) {
          val = thiz.options.max_value / 2 + thiz.options.min_value / 2;
          jq.val(val);
        }
        if (val &lt; thiz.options.min_value) {
          val = thiz.options.min_value;
          jq.val(val);
        } else if (val > thiz.options.max_value) {
          val = thiz.options.max_value;
          jq.val(val);
        }
        $.post(thiz.home.options.control_endpoint + thiz.id, {"value": val});
      });
  this.html.find("button").on("click", function() {
    var val = parseFloat(thiz.input.val());
    if (isNaN(val)) {
      val = thiz.options.max_value / 2 + thiz.options.min_value / 2;
    }
    var jq = $(this);
    if (jq.hasClass("minus")) {
      val = val - thiz.options.step;
    } else if (jq.hasClass("plus")) {
      val = val + thiz.options.step;
    }
    thiz.input.val(val);
    thiz.input.trigger("change");
  });
  return this.html;
};

Home.register_control("plus-minus", PlusMinusControl);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Home.html">Home</a></li><li><a href="OnOffControl.html">OnOffControl</a></li><li><a href="PlusMinusControl.html">PlusMinusControl</a></li><li><a href="SliderControl.html">SliderControl</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a> on Fri Nov 22 2013 00:15:22 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
